/* NerveNet ver.0.1.0  (c) 2013 Meathill  MIT*/
!function(a,b){function c(a){return"function"==typeof a}function d(a){return"isArray"in Array?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)}function e(a){for(var b=h.call(arguments,1),c=0,d=b.length;d>c;c++){var e=b[c];for(var f in e)a[f]=e[f]}return a}function f(a){return k.dir+"/"+a.split(".").join("/")+".js"}function g(a,b){b=b||"";var c=document.createElement("script");c.className="nervenet "+b,c.innerHTML=a,s?r.insertBefore(c,s):r.appendChild(c)}b.Nervenet=a;var h=Array.prototype.slice,i={},j={VERSION:"0.1.0",createContext:function(){return new l},createNameSpace:function(a,c){var d=a.split("."),c=c||b;i[a]=c;for(var e=0,f=d.length;f>e;e++)c[d[e]]=c[d[e]]||{},c=c[d[e]];return c}};e(a,j);var k={context:"app",dir:"js",isAjax:!0},l=function(){this.singletons={},this.constructors={},this.eventMap={},this.kvMap={}};l.prototype={createInstance:function(a){var b=h.call(arguments,1),c=new a(b);return c[k.context]=this,c},getSingleton:function(a){if(!(a in this.singletons)){if(!(a in this.constructors))throw new Error("no such class");this.singletons[a]=new this.constructors[a]}return this.singletons[a]},getValue:function(a){return this.kvMap[a]},init:function(a){a=d(a)?a:[a];for(var b in i)for(var e=0,f=a.length;f>e;e++){var g=new RegExp("^"+a[e]);if(!g.test(b)){for(var h=b.split("."),j=i[b],l=0,m=h.length;m>l;l++)j=j[h[l]];for(var n in j)c(j[n])&&(j[n].prototype[k.context]=this)}}},inject:function(a){c(a)?a.prototype[k.context]=this:a[k.context]=this},mapEvent:function(a,b,c){this.eventMap[a]=this.eventMap.event||[],this.eventMap[a].push({command:b,context:c})},mapSingleton:function(a,b){c(a)?this.constructors[b]=a:this.singletons[b]=a},mapValue:function(a,b){this.kvMap[a]=b},start:function(a){u.start(a,this)},trigger:function(a){var b=Array.prototype.slice.call(arguments,1),c=this.eventMap[a];b.push(this);for(var d=0,e=c.length;e>d;d++){var f=c[d];f.command.apply(f.context,b)}}};var m=/(import|extend) ((\w+\.)+(\w+))/gi,n=-1,o=[],p=[],q={},r=document.getElementsByTagName("head")[0]||document.documentElement,s=r.getElementsByTagName("base")[0],t=new XMLHttpRequest;t.onload=function(){o[n].content=this.response,u.parse(this.response),u.loadNext()};var u={createNodes:function(){for(var a=0,b=p.length;b>a;a++){for(var c=0;b>c&&o[c].fullname!==p[a];c++);g(o[c].content,o[c].className),o.splice(c,1)}"func"in q&&q.func.call(q.context)},loadNext:function(){return n++,n>=o.length?(this.createNodes(),void 0):(t.open("get",f(o[n].fullname)),t.send(),void 0)},parse:function(a){c(a)&&(a=a.toString());var b=a.match(m);if(b)for(var d=0,e=b.length;e>d;d++){var f=b[d].slice(7);if(-1===p.indexOf(f)){var g={fullname:f,className:f.slice(f.lastIndexOf(".")+1),type:b[d].substr(0,6),content:""};if(o.push(g),"import"===g.type)p.push(f);else{for(var h=o[n].fullname,i=0;p[i]!==h;)i++;p.splice(i,0,f)}}}},reset:function(){p=[],o=[]},start:function(a,b){this.reset(),q={func:a,context:b},this.parse(a),this.loadNext()}}}({},function(){return this}());
/*
//@ sourceMappingURL=Nervenet.min.map
*/