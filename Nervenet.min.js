/*! NerveNet 2013-06-06 */
!function(){function a(a){return"function"==typeof a}function b(a){return"isArray"in Array?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)}var c,d=this;c="undefined"!=typeof exports?exports:d.Nervenet={},c.VERSION="0.1.0",c.createContext=function(){return new f};var e={},f=function(){this.injector=new g};f.createNameSpace=function(a,b){var c=a.split("."),b=b||window;e[a]=b;for(var d=0,f=c.length;f>d;d++)b[c[d]]=b[c[d]]||{},b=b[c[d]];return b},f.prototype={injector:null,config:function(a){return a.call(this),this},initInjector:function(c){c=b(c)?c:[c];for(var d in e)for(var f=0,g=c.length;g>f;f++){var h=new RegExp("^"+c[f]);if(!h.test(d)){for(var i=d.split("."),j=e[d],k=0,l=i.length;l>k;k++)j=j[i[k]];for(var m in j)a(j[m])&&(j[m].prototype.app=this)}}},inject:function(a){a.prototype.app=this}};var g=function(){this.singletons={},this.constructors={},this.eventMap=[]};g.prototype={constructors:null,singletons:null,eventMap:null,getSingleton:function(a){if(!this.singletons[a]){if(!(a in this.constructors))throw new Error("no such class");this.singletons[a]=new this.constructors[a]}return this.singletons[a]},mapEvent:function(a,b,c){this.eventMap.push({type:a,command:b,context:c})},mapSingleton:function(b,c){a(c)?this.constructors[b]=c:this.singletons[b]=c},trigger:function(a){var b=Array.prototype.slice.call(arguments,1);b.push(this);for(var c=0,d=this.eventMap.length;d>c;c++){var e=this.eventMap[c];e.type===a&&e.command.apply(e.context,b)}}}}();